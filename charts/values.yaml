# 应用
application:
  name: "application"
  qualifier: ""
  namespace: "default"
  enabled: true


# 镜像
image:
  registry: ""
  repository: "nginx"
  tag: "latest"
  policy: "IfNotPresent"
  secrets: []


# 部署
deployment:
  replicas: 1
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
  revisionHistoryLimit: 3


# 容器
container:
  name: "nginx"
  port: 80
  command: []
  args: []
  env: {}
  envFrom: []

  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

  # 健康检查
  livenessProbe:
    enabled: true
    httpGet:
      path: "/health"
      port: 80
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5

  readinessProbe:
    enabled: true
    httpGet:
      path: "/ready"
      port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
  securityContext: {}


# 服务配置
service:
  enabled: true
  type: "ClusterIP"
  port: 80
  targetPort: 80
  annotations: {}


# 自动伸缩
autoscale:
  enabled: true
  min: 1
  max: 10
  cpu:
    enabled: true
    target: 80
  memory:
    enabled: false
    target: 80

  # 监控
  metrics: []

  # 行为
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
        - type: Percent
          value: 100
          periodSeconds: 15
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
        - type: Percent
          value: 100
          periodSeconds: 15


# 路径
ingress:
  enabled: false
  className: ""
  hosts:
    - host: "app.example.com"
      paths:
        - path: "/"
          pathType: "Prefix"
  tls: []
  annotations: {}


# 配置
configmap:
  enabled: false
  data: {}


# 加密配置
secret:
  enabled: false
  data: {}


# 服务账户
serviceAccount:
  create: false
  name: ""
  annotations: {}


# 持久化存储
persistence:
  enabled: false
  accessMode: "ReadWriteOnce"
  size: "10Gi"
  storageClass: ""
  mountPath: "/data"


# 副本
pod:
  annotations: {}
  labels: {}
  securityContext: {}
  affinity: {}
  nodeSelector: {}
  tolerations: []


pdb:
  enabled: false
  minAvailable: 1
  maxUnavailable: ""


test: # 测试数据
  enabled: true
  image: "busybox:latest"
  command: ["wget", "--spider", "http://localhost:80/health"]