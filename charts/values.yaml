enabled: true # 是否开启，在不开启的情况下，不会部署
name: "mian" # 容器名字
qualifier: ""
namespace: "default"
command: []
args: []
env: {}
envFrom: []
port: 80
replicas: 1
context:
  security: {}


# 镜像
image:
  registry: ""
  repository: "nginx"
  tag: "latest"
  policy: "IfNotPresent"
  secrets: []


# 部署
deployment:
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
  revisionHistoryLimit: 3


# 资源
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"



# 健康检查
probe:
  liveness:
    enabled: false
    httpGet:
      path: "/health"
      port: 80
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
  readiness:
    enabled: false
    httpGet:
      path: "/ready"
      port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3

# 服务配置
service:
  enabled: true
  type: "ClusterIP"
  port: 80
  targetPort: 80
  annotations: {}
  account: # 服务账户
    create: false
    name: ""
    annotations: { }


# 自动伸缩
autoscale:
  enabled: true
  min: 1
  max: 100
  cpu:
    enabled: true
    target: 80
  memory:
    enabled: true
    target: 80

  # 监控
  metrics: []

  # 行为
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
        - type: Percent
          value: 100
          periodSeconds: 15
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
        - type: Percent
          value: 100
          periodSeconds: 15


# 路径
ingress:
  enabled: false
  className: ""
  hosts:
    - host: "app.example.com"
      paths:
        - path: "/"
          pathType: "Prefix"
  tls: []
  annotations: {}


# 配置
configmap:
  enabled: false
  data: {}


# 加密配置
secret:
  enabled: false
  data: {}


# 持久化存储
persistence:
  enabled: false
  accessMode: "ReadWriteOnce"
  size: "10Gi"
  storageClass: ""
  mountPath: "/data"


# 副本
pod:
  annotations: {}
  labels: {}
  securityContext: {}
  affinity: {}
  nodeSelector: {}
  tolerations: []


pdb:
  enabled: false
  minAvailable: 1
  maxUnavailable: ""


test: # 测试数据
  enabled: true
  image: "busybox:latest"
  command: ["wget", "--spider", "http://localhost:80/health"]